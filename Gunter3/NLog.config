<?xml version="1.0" encoding="utf-8" ?>
<nlog
  xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  internalLogFile="c:\temp\NLog.Reusable.Console.log"
  internalLogLevel="Error">

  <!-- *** This file was autogenerated on 23.11.2017 19:54:33 (UTC) *** -->
  <!-- *** Any modifications can be lost. *** -->

  <!-- sub-templates -->

  <variable name="environmentNotAvailable" value="N/A" />
  <variable name="environmentLayout" value="${whenEmpty:whenEmpty=${environmentNotAvailable}:inner=${event-context:item=Environment}}" />

  <variable name="callsiteLayout" value="${callsite:className=true:fileName=true:methodName:true}" />
  <variable name="exceptionLayout" value="${exception:format=tostring:separator= | :innerFormat=tostring,message:maxInnerExceptionLevel=7:innerExceptionSeparator= | }" />
  <variable name="stackTraceLayout" value="${stacktrace:format=raw:topFrames=7:separator= » }" />

  <!-- full templates -->  

  <variable name="debuggerLayout" value="OmniLog » ${level:uppercase=true} | ${message}${onexception:${newline}${exceptionLayout}}" />

    <targets>    

    <target xsi:type="Debugger" name="debugger" layout="${debuggerLayout}" />

	
		<target xsi:type="Database" name="SemLog" dbProvider="System.Data.SqlClient" connectionString="data source=(local);initial catalog=testingdb;integrated security=true">
			<commandText>
				INSERT INTO [dbo].[SemLog] (
            [Layer],
            [Level],
            [Timestamp],
            [Environment],
            [Product],
            [Logger],
            [Transaction],
            [State],
            [Snapshot],
            [Event],
            [Elapsed],
            [Result],
            [Message],
            [Exception],
            [CallerMemberName],
            [CallerLineNumber],
            [CallerFilePath]
				) VALUES (
            @Layer,
            @Level,
            @Timestamp,
            @Environment,
            @Product,
            @Logger,
            NULLIF(@Transaction, ''),
            NULLIF(@State, ''),
            NULLIF(@Snapshot, ''),
            NULLIF(@Event, ''),
            NULLIF(@Elapsed, ''),
            NULLIF(@Result, ''),
            NULLIF(@Message, ''),
            NULLIF(@Exception, ''),
            NULLIF(@CallerMemberName, ''),
            NULLIF(@CallerLineNumber, ''),
            NULLIF(@CallerFilePath, '')
				)
			</commandText>
						
			<parameter name="@Layer" layout="${ignore-case-event-properties:item=Layer}" />
			<parameter name="@Level" layout="${level:lowercase=true}" />
			<parameter name="@Timestamp" layout="${longdate:universalTime=true}" />
			<parameter name="@Environment" layout="${ignore-case-event-properties:item=Environment}" />
			<parameter name="@Product" layout="${ignore-case-event-properties:item=Product}" />
			<parameter name="@Logger" layout="${logger}" />
			<parameter name="@Transaction" layout="${ignore-case-event-properties:item=Transaction}" />
			<parameter name="@State" layout="${ignore-case-event-properties:item=State}" />
			<parameter name="@Snapshot" layout="${ignore-case-event-properties:item=Snapshot}" />
			<parameter name="@Event" layout="${ignore-case-event-properties:item=Event}" />
			<parameter name="@Elapsed" layout="${ignore-case-event-properties:item=Elapsed}" />
			<parameter name="@Result" layout="${ignore-case-event-properties:item=Result}" />
			<parameter name="@Message" layout="${ignore-case-event-properties:item=Message}" />
			<parameter name="@Exception" layout="${onexception:${exceptionLayout}}" />
			<parameter name="@CallerMemberName" layout="${ignore-case-event-properties:item=CallerMemberName}" />
			<parameter name="@CallerLineNumber" layout="${ignore-case-event-properties:item=CallerLineNumber}" />
			<parameter name="@CallerFilePath" layout="${ignore-case-event-properties:item=CallerFilePath}" />
		</target>

  </targets>

  <rules>

    <!-- Log everything to debugger -->
    <logger name="*" minlevel="Trace" writeTo="debugger" enabled="true" final="false" />

   
    <!-- Use the MainLog if no other log matches. -->
    <logger name="*" appendTo="SemLog" minlevel="Trace" enabled="true" final="true" />

  </rules>
</nlog>

